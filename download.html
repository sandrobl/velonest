<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Download VeloNest — iOS & Android</title>
  <meta name="description"
    content="Download VeloNest on iOS or Android. Find reliable bicycle parking with photos, capacity and community notes.">
  <link rel="canonical" href="/download.html">
  <link rel="preconnect" href="https://matomo.2103.ch" crossorigin>
  <meta property="og:title" content="Download VeloNest — iOS & Android">
  <meta property="og:description" content="Find secure bicycle parking before you arrive.">
  <meta property="og:type" content="website">
  <meta property="og:image" content="img/velonest_overview1.png">
  <meta name="twitter:card" content="summary_large_image">
  <link rel="stylesheet" href="style.css">
  <!-- Matomo -->
  <script>
    var _paq = window._paq = window._paq || [];
    _paq.push(['enableHeartBeatTimer', 15]);
    _paq.push(['setDocumentTitle', document.title]);
    _paq.push(['enableLinkTracking']);
    _paq.push(['trackPageView']);
    (function () {
      var u = "https://matomo.2103.ch/";
      _paq.push(['setTrackerUrl', u + 'matomo.php']);
      _paq.push(['setSiteId', '20']);
      var d = document, g = d.createElement('script'), s = d.getElementsByTagName('script')[0];
      g.async = true; g.src = u + 'matomo.js'; s.parentNode.insertBefore(g, s);
    })();
    window.trackEvent = function (category, action, name, value) { try { _paq.push(['trackEvent', category, action, name, value]); } catch (e) { } };
  </script>
  <!-- End Matomo Code -->
</head>

<body>
  <header class="site-header">
    <nav class="nav">
      <a class="brand" href="index.html">
        <img src="img/logo.png" alt="VeloNest logo" />
        <span>VeloNest</span>
      </a>
      <div class="nav-actions">
        <div class="language-switch" role="group" aria-label="Language selector">
          <button type="button" class="language-button active" data-lang="en" aria-pressed="true">EN</button>
          <button type="button" class="language-button" data-lang="de" aria-pressed="false">DE</button>
        </div>
      </div>
    </nav>
  </header>

  <main>
    <section class="form-card">
      <div class="section-header">
        <h1 data-i18n="download.heading">Download Now</h1>
        <p class="muted" data-i18n="download.subheading">Choose your Operating system.</p>
      </div>
      <div class="store-badges" role="group" aria-label="App stores">
        <a id="choose-ios" class="store-badge" href="#" aria-label="Download on the App Store">
          <img src="img/apple_store.svg" alt="Download on the App Store" loading="lazy" height="56">
        </a>
        <a id="choose-android" class="store-badge" href="#" aria-label="Get it on Google Play">
          <img src="img/google-play.png" alt="Get it on Google Play" loading="lazy" height="56">
        </a>
      </div>
      <p class="muted" style="margin-top:.25rem; font-size: 8px" data-i18n="download.legal">Apple and the Apple logo are
        trademarks of
        Apple Inc. Google Play and the Google Play logo are trademarks of Google LLC.</p>
    </section>
  </main>

  <footer>
    <p data-i18n="footer.note">© 2025 VeloNest. Made by cyclists, for cyclists.</p>
  </footer>

  <script>
    const translations = {
      en: {
        'download.heading': 'Download Now',
        'download.subheading': 'Select your os to continue.',
        'download.ios': 'iOS',
        'download.android': 'Android',
        'download.note': 'You can change this later.',
        'download.legal': 'Apple and the Apple logo are trademarks of Apple Inc. Google Play and the Google Play logo are trademarks of Google LLC.',
        'footer.note': '© 2025 VeloNest. Made by cyclists, for cyclists.'
      },
      de: {
        'download.heading': 'Jetzt herunterladen',
        'download.subheading': 'Wähle dein OS, um fortzufahren.',
        'download.ios': 'iOS',
        'download.android': 'Android',
        'download.note': 'Das kannst du später ändern.',
        'download.legal': 'Apple und das Apple-Logo sind Marken von Apple Inc. Google Play und das Google Play-Logo sind Marken von Google LLC.',
        'footer.note': '© 2025 VeloNest. Von Radfahrern für Radfahrer.'
      }
    };

    const LANGUAGE_STORAGE_KEY = 'velonest-lang';
    function applyLanguage(lang) {
      const fallback = translations[lang] ? lang : 'en';
      document.documentElement.lang = fallback;
      document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.dataset.i18n; const t = translations[fallback][key]; if (t) el.textContent = t;
      });
      document.querySelectorAll('.language-button').forEach(btn => {
        const active = btn.dataset.lang === fallback; btn.classList.toggle('active', active); btn.setAttribute('aria-pressed', active ? 'true' : 'false');
      });
      localStorage.setItem(LANGUAGE_STORAGE_KEY, fallback);
    }
    function browserLang() {
      const list = [...(navigator.languages || []), navigator.language].filter(Boolean).map(l => l.slice(0, 2).toLowerCase());
      return list.find(code => translations[code]) || 'en';
    }
    document.addEventListener('DOMContentLoaded', () => {
      applyLanguage(localStorage.getItem(LANGUAGE_STORAGE_KEY) || browserLang());
      document.querySelectorAll('.language-button').forEach(btn => btn.addEventListener('click', () => applyLanguage(btn.dataset.lang)));

      function goNext(os) {
        if (window.trackEvent) window.trackEvent('OSSelection', 'click', os);
        const url = new URL('signup.html', window.location.origin);
        url.searchParams.set('os', os);
        window.location.href = url.toString();
      }
      document.getElementById('choose-ios').addEventListener('click', (e) => { e.preventDefault(); goNext('ios'); });
      document.getElementById('choose-android').addEventListener('click', (e) => { e.preventDefault(); goNext('android'); });
    });
  </script>
</body>

</html>
